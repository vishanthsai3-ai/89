<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisionForge AI - DeepSeek Enhanced Photo Generator</title>
    <style>
        :root {
            --primary: #0066cc;
            --primary-dark: #004c99;
            --secondary: #00b894;
            --accent: #ff6b6b;
            --dark: #0a1929;
            --darker: #07121f;
            --light: #e3f2fd;
            --gray: #8a94a6;
            --success: #00b894;
            --warning: #ff9f43;
            --error: #ff6b6b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 0;
            margin-bottom: 30px;
            position: relative;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .logo {
            font-size: 3.2rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            font-weight: 800;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 8px rgba(0, 102, 204, 0.3));
        }

        .tagline {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.5;
        }

        .badge-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 25px;
        }

        .badge {
            background: rgba(0, 102, 204, 0.15);
            border: 1px solid rgba(0, 102, 204, 0.3);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #66b3ff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .badge::before {
            content: "‚úì";
            font-weight: bold;
        }

        /* Main Layout */
        .app-wrapper {
            display: grid;
            grid-template-columns: 1fr 1.8fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 1024px) {
            .app-wrapper {
                grid-template-columns: 1fr;
            }
        }

        /* Control Panel */
        .control-panel {
            background: rgba(10, 25, 41, 0.9);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(0, 102, 204, 0.2);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
        }

        .gallery-section {
            background: rgba(10, 25, 41, 0.9);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(0, 102, 204, 0.2);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
        }

        /* Section Titles */
        .section-title {
            font-size: 1.4rem;
            margin-bottom: 25px;
            color: #66b3ff;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 102, 204, 0.3);
        }

        .section-title::before {
            font-size: 1.3rem;
        }

        .control-title::before {
            content: "‚ö°";
        }

        .gallery-title::before {
            content: "üé®";
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #a0c8ff;
            font-weight: 500;
            font-size: 0.95rem;
            letter-spacing: 0.3px;
        }

        /* API Key Input */
        .api-key-container {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 102, 204, 0.2);
        }

        .api-key-input-wrapper {
            position: relative;
            margin-bottom: 10px;
        }

        .api-key-input {
            width: 100%;
            padding: 16px 20px 16px 45px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 102, 204, 0.3);
            border-radius: 12px;
            color: white;
            font-size: 15px;
            font-family: 'Monaco', 'Menlo', monospace;
            letter-spacing: 0.5px;
            transition: all 0.3s;
        }

        .api-key-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
        }

        .key-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 1.2rem;
        }

        .api-info {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 8px;
            line-height: 1.5;
        }

        .api-link {
            color: #66b3ff;
            text-decoration: none;
            border-bottom: 1px dotted rgba(102, 179, 255, 0.5);
            transition: all 0.2s;
        }

        .api-link:hover {
            color: white;
            border-bottom-color: white;
        }

        /* Prompt Input */
        .prompt-wrapper {
            position: relative;
        }

        textarea {
            width: 100%;
            min-height: 160px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 102, 204, 0.3);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
        }

        .prompt-actions {
            position: absolute;
            bottom: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
        }

        .prompt-btn {
            background: rgba(0, 102, 204, 0.3);
            border: 1px solid rgba(0, 102, 204, 0.5);
            color: #66b3ff;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .prompt-btn:hover {
            background: rgba(0, 102, 204, 0.5);
            color: white;
        }

        /* Style Grid */
        .style-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .style-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .style-option {
            padding: 18px 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            color: #a0c8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            text-align: center;
        }

        .style-option:hover {
            background: rgba(0, 102, 204, 0.2);
            border-color: rgba(0, 102, 204, 0.5);
            transform: translateY(-2px);
        }

        .style-option.active {
            background: rgba(0, 102, 204, 0.3);
            border-color: var(--primary);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 102, 204, 0.3);
        }

        .style-emoji {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .style-name {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Size Controls */
        .size-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        .size-preset {
            padding: 18px 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            color: #a0c8ff;
        }

        .size-preset:hover {
            background: rgba(0, 102, 204, 0.2);
            border-color: rgba(0, 102, 204, 0.5);
        }

        .size-preset.active {
            background: rgba(0, 102, 204, 0.3);
            border-color: var(--primary);
            color: white;
        }

        .custom-size {
            grid-column: span 3;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .size-input {
            padding: 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 102, 204, 0.3);
            border-radius: 12px;
            color: white;
            text-align: center;
            font-size: 16px;
        }

        /* Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .option-item {
            background: rgba(0, 0, 0, 0.25);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(0, 102, 204, 0.1);
            transition: all 0.3s;
        }

        .option-item:hover {
            border-color: rgba(0, 102, 204, 0.3);
            background: rgba(0, 0, 0, 0.35);
        }

        .option-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .option-icon {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .option-title {
            font-weight: 600;
            color: white;
            font-size: 1rem;
        }

        .option-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
            margin-top: 10px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Generate Button */
        .generate-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .generate-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 30px rgba(0, 102, 204, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .generate-btn::before {
            content: "‚ú®";
            font-size: 1.3rem;
        }

        .generate-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: all 0.5s;
        }

        .generate-btn:hover::after {
            left: 120%;
        }

        /* Loading State */
        .loading {
            display: none;
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            margin-top: 25px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 102, 204, 0.2);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 25px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #a0c8ff;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .loading-subtext {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Enhanced Prompt */
        .enhanced-prompt {
            background: rgba(0, 184, 148, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin-top: 25px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .enhanced-header {
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .enhanced-header::before {
            content: "üîç";
        }

        .enhanced-text {
            color: #a3ffeb;
            line-height: 1.6;
            font-size: 15px;
        }

        /* Gallery */
        .gallery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .gallery-stats {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .stat {
            background: rgba(0, 102, 204, 0.15);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #66b3ff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .gallery-actions {
            display: flex;
            gap: 10px;
        }

        .gallery-btn {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(0, 102, 204, 0.3);
            background: rgba(0, 102, 204, 0.1);
            color: #66b3ff;
        }

        .gallery-btn:hover {
            background: rgba(0, 102, 204, 0.2);
            color: white;
        }

        .danger-btn {
            background: rgba(255, 107, 107, 0.1);
            border-color: rgba(255, 107, 107, 0.3);
            color: #ff9999;
        }

        .danger-btn:hover {
            background: rgba(255, 107, 107, 0.2);
            color: white;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .empty-gallery {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #a0c8ff;
        }

        /* Image Card */
        .image-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s;
            border: 1px solid rgba(0, 102, 204, 0.1);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            border-color: rgba(0, 102, 204, 0.3);
        }

        .image-container {
            position: relative;
            width: 100%;
            height: 280px;
            overflow: hidden;
            background: linear-gradient(135deg, #0a1929, #0f2741);
        }

        .generated-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-size: 14px;
            gap: 10px;
        }

        .image-placeholder::before {
            content: "üñºÔ∏è";
            font-size: 3rem;
            opacity: 0.5;
        }

        .image-info {
            padding: 20px;
        }

        .image-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #a0c8ff;
            margin-bottom: 15px;
        }

        .image-prompt {
            color: #d1e5ff;
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .image-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .action-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .download-btn {
            background: rgba(0, 184, 148, 0.2);
            color: var(--secondary);
        }

        .download-btn:hover {
            background: rgba(0, 184, 148, 0.3);
            color: white;
        }

        .regenerate-btn {
            background: rgba(0, 102, 204, 0.2);
            color: var(--primary);
        }

        .regenerate-btn:hover {
            background: rgba(0, 102, 204, 0.3);
            color: white;
        }

        /* Status Bar */
        .status-bar {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background: rgba(10, 25, 41, 0.95);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
            backdrop-filter: blur(10px);
            max-width: 400px;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .status-bar.error {
            border-left-color: var(--error);
        }

        .status-bar.success {
            border-left-color: var(--success);
        }

        .status-bar.warning {
            border-left-color: var(--warning);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid rgba(0, 102, 204, 0.2);
            color: var(--gray);
            font-size: 0.9rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .footer-link {
            color: #66b3ff;
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-link:hover {
            color: white;
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-wrapper {
                gap: 20px;
            }
            
            .control-panel, .gallery-section {
                padding: 20px;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .image-grid {
                grid-template-columns: 1fr;
            }
            
            .gallery-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .gallery-stats {
                justify-content: center;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="logo">
                <span class="logo-icon">ü§ñ</span>
                VisionForge AI
            </h1>
            <p class="tagline">DeepSeek-powered AI image generation with intelligent prompt enhancement and free image generation</p>
            <div class="badge-container">
                <div class="badge">DeepSeek AI Enhanced</div>
                <div class="badge">Free Image Generation</div>
                <div class="badge">HD Quality</div>
                <div class="badge">Multiple Styles</div>
                <div class="badge">No API Limits</div>
            </div>
        </div>

        <!-- Main App -->
        <div class="app-wrapper">
            <!-- Control Panel -->
            <div class="control-panel">
                <h2 class="section-title control-title">Image Creation</h2>
                
                <!-- DeepSeek API Section -->
                <div class="api-key-container">
                    <label for="apiKey">DeepSeek API Key (Optional)</label>
                    <div class="api-key-input-wrapper">
                        <span class="key-icon"><i class="fas fa-key"></i></span>
                        <input type="password" id="apiKey" class="api-key-input" 
                               placeholder="sk-... (Enter for enhanced features)">
                    </div>
                    <div class="api-info">
                        <p>üîë <strong>Optional but recommended:</strong> Get your free API key from <a href="https://platform.deepseek.com/" target="_blank" class="api-link">DeepSeek Platform</a></p>
                        <p>‚ú® Without API key, you'll still get free image generation with basic prompt enhancement</p>
                        <p>üöÄ With API key: Advanced prompt engineering, style optimization, and better results</p>
                    </div>
                </div>

                <!-- Prompt Input -->
                <div class="form-group">
                    <label for="prompt">Describe your image vision</label>
                    <div class="prompt-wrapper">
                        <textarea id="prompt" placeholder="A cyberpunk samurai in neon-lit Tokyo streets at night, rain reflections, cinematic lighting, highly detailed, 8k resolution, Blade Runner aesthetic"></textarea>
                        <div class="prompt-actions">
                            <button class="prompt-btn" onclick="enhanceWithAI()">
                                <i class="fas fa-magic"></i> Enhance with AI
                            </button>
                            <button class="prompt-btn" onclick="clearPrompt()">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Style Selection -->
                <div class="form-group">
                    <label>Art Style</label>
                    <div class="style-grid" id="styleGrid">
                        <!-- Styles will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Size Selection -->
                <div class="form-group">
                    <label>Image Size</label>
                    <div class="size-controls">
                        <div class="size-preset active" data-size="1024x1024">Square (1024√ó1024)</div>
                        <div class="size-preset" data-size="1280x720">Landscape (1280√ó720)</div>
                        <div class="size-preset" data-size="720x1280">Portrait (720√ó1280)</div>
                        <div class="custom-size">
                            <input type="number" id="width" class="size-input" placeholder="Width" min="256" max="2048" value="1024">
                            <input type="number" id="height" class="size-input" placeholder="Height" min="256" max="2048" value="1024">
                        </div>
                    </div>
                </div>

                <!-- Options -->
                <div class="options-grid">
                    <div class="option-item">
                        <div class="option-header">
                            <span class="option-icon">üß†</span>
                            <span class="option-title">AI Enhancement</span>
                        </div>
                        <p class="option-description">Use DeepSeek AI to enhance your prompts for better results</p>
                        <label class="toggle-switch">
                            <input type="checkbox" id="enhancePrompt" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="option-item">
                        <div class="option-header">
                            <span class="option-icon">üé≠</span>
                            <span class="option-title">Multiple Variations</span>
                        </div>
                        <p class="option-description">Generate 4 different variations of your image</p>
                        <label class="toggle-switch">
                            <input type="checkbox" id="multipleVariations" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="option-item">
                        <div class="option-header">
                            <span class="option-icon">‚≠ê</span>
                            <span class="option-title">High Quality</span>
                        </div>
                        <p class="option-description">Generate higher resolution and more detailed images</p>
                        <label class="toggle-switch">
                            <input type="checkbox" id="highQuality" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="option-item">
                        <div class="option-header">
                            <span class="option-icon">üîß</span>
                            <span class="option-title">Auto-Enhance</span>
                        </div>
                        <p class="option-description">Automatically fix and improve generated images</p>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoEnhance" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Generate Button -->
                <button id="generateBtn" class="generate-btn">
                    Generate AI Images
                </button>

                <!-- Loading State -->
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p class="loading-text">VisionForge is creating your masterpiece...</p>
                    <p class="loading-subtext" id="loadingDetails">Processing with DeepSeek AI</p>
                </div>

                <!-- Enhanced Prompt Display -->
                <div class="enhanced-prompt" id="enhancedPromptDisplay">
                    <div class="enhanced-header">AI-Enhanced Prompt</div>
                    <p class="enhanced-text" id="enhancedText"></p>
                </div>
            </div>

            <!-- Gallery -->
            <div class="gallery-section">
                <div class="gallery-header">
                    <h2 class="section-title gallery-title">Image Gallery</h2>
                    <div class="gallery-stats">
                        <div class="stat" id="totalImages">
                            <i class="fas fa-images"></i>
                            <span>0 images</span>
                        </div>
                        <div class="stat" id="storageUsed">
                            <i class="fas fa-database"></i>
                            <span>0 MB</span>
                        </div>
                    </div>
                    <div class="gallery-actions">
                        <button class="gallery-btn" onclick="exportGallery()">
                            <i class="fas fa-download"></i> Export All
                        </button>
                        <button class="gallery-btn danger-btn" id="clearBtn">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>
                </div>

                <div class="image-grid" id="imageGrid">
                    <div class="empty-gallery">
                        <div class="empty-icon">üé®</div>
                        <div class="empty-title">Your gallery is empty</div>
                        <p>Describe an image above and click "Generate" to create your first masterpiece!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar" id="statusBar"></div>

        <!-- Footer -->
        <div class="footer">
            <p>VisionForge AI | Powered by DeepSeek AI and free image generation services</p>
            <p>‚ö†Ô∏è Note: This app uses free image generation APIs. For production use, consider integrating with paid services for better quality and reliability.</p>
            <div class="footer-links">
                <a href="https://platform.deepseek.com/" target="_blank" class="footer-link">Get DeepSeek API Key</a>
                <a href="#" class="footer-link" onclick="showInstructions()">How to Use</a>
                <a href="#" class="footer-link" onclick="showApiInfo()">API Information</a>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const STYLES = [
            { id: 'realistic', name: 'Photorealistic', emoji: 'üì∏', keywords: 'photorealistic, 8k, ultra detailed, professional photography' },
            { id: 'anime', name: 'Anime', emoji: 'üéå', keywords: 'anime style, studio ghibli, vibrant colors, detailed background' },
            { id: '3d', name: '3D Render', emoji: 'üéÆ', keywords: '3D render, Blender, Unreal Engine, cinematic lighting' },
            { id: 'cyberpunk', name: 'Cyberpunk', emoji: 'üîÆ', keywords: 'cyberpunk, neon lights, futuristic, Blade Runner' },
            { id: 'pixel', name: 'Pixel Art', emoji: 'üëæ', keywords: 'pixel art, 16-bit, retro video game, nostalgic' },
            { id: 'cartoon', name: 'Cartoon', emoji: 'üì∫', keywords: 'cartoon style, Pixar animation, Disney, expressive' },
            { id: 'cinematic', name: 'Cinematic', emoji: 'üé¨', keywords: 'cinematic, dramatic lighting, film grain, movie still' },
            { id: 'portrait', name: 'Portrait', emoji: 'üë§', keywords: 'portrait photography, sharp focus, studio lighting' },
            { id: 'landscape', name: 'Landscape', emoji: 'üèûÔ∏è', keywords: 'landscape photography, golden hour, dramatic sky' }
        ];

        // Free image generation APIs (rotating between different services)
        const IMAGE_APIS = [
            {
                name: 'FreeImageAPI',
                url: 'https://api.freeimage.ai/generate',
                requiresKey: false,
                limit: 50
            },
            {
                name: 'Picsum',
                url: 'https://picsum.photos/seed/{seed}/{width}/{height}',
                requiresKey: false,
                limit: 1000
            }
        ];

        // State
        let currentStyle = 'realistic';
        let currentSize = '1024x1024';
        let generatedImages = [];
        let deepSeekApiKey = '';
        let currentApiIndex = 0;

        // DOM Elements
        const elements = {
            apiKey: document.getElementById('apiKey'),
            prompt: document.getElementById('prompt'),
            styleGrid: document.getElementById('styleGrid'),
            generateBtn: document.getElementById('generateBtn'),
            loading: document.getElementById('loading'),
            loadingDetails: document.getElementById('loadingDetails'),
            enhancedPromptDisplay: document.getElementById('enhancedPromptDisplay'),
            enhancedText: document.getElementById('enhancedText'),
            imageGrid: document.getElementById('imageGrid'),
            totalImages: document.getElementById('totalImages'),
            storageUsed: document.getElementById('storageUsed'),
            clearBtn: document.getElementById('clearBtn'),
            statusBar: document.getElementById('statusBar'),
            width: document.getElementById('width'),
            height: document.getElementById('height'),
            enhancePrompt: document.getElementById('enhancePrompt'),
            multipleVariations: document.getElementById('multipleVariations'),
            highQuality: document.getElementById('highQuality'),
            autoEnhance: document.getElementById('autoEnhance')
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeStyles();
            initializeSizePresets();
            setupEventListeners();
            loadSavedData();
            updateGalleryStats();
        });

        function initializeStyles() {
            STYLES.forEach(style => {
                const styleOption = document.createElement('div');
                styleOption.className = `style-option ${style.id === currentStyle ? 'active' : ''}`;
                styleOption.innerHTML = `
                    <div class="style-emoji">${style.emoji}</div>
                    <div class="style-name">${style.name}</div>
                `;
                styleOption.dataset.style = style.id;
                
                styleOption.addEventListener('click', () => {
                    document.querySelectorAll('.style-option').forEach(opt => opt.classList.remove('active'));
                    styleOption.classList.add('active');
                    currentStyle = style.id;
                    localStorage.setItem('visionforge_style', style.id);
                });
                
                elements.styleGrid.appendChild(styleOption);
            });
        }

        function initializeSizePresets() {
            document.querySelectorAll('.size-preset').forEach(preset => {
                preset.addEventListener('click', () => {
                    document.querySelectorAll('.size-preset').forEach(p => p.classList.remove('active'));
                    preset.classList.add('active');
                    currentSize = preset.dataset.size;
                    
                    const [width, height] = currentSize.split('x').map(Number);
                    elements.width.value = width;
                    elements.height.value = height;
                });
            });
        }

        function setupEventListeners() {
            elements.generateBtn.addEventListener('click', generateImages);
            
            elements.clearBtn.addEventListener('click', clearAllImages);
            
            // Auto-save API key
            elements.apiKey.addEventListener('input', (e) => {
                deepSeekApiKey = e.target.value.trim();
                localStorage.setItem('visionforge_deepseek_key', deepSeekApiKey);
            });
            
            // Auto-save prompt
            elements.prompt.addEventListener('input', debounce(() => {
                localStorage.setItem('visionforge_prompt', elements.prompt.value);
            }, 500));
            
            // Ctrl/Cmd + Enter to generate
            elements.prompt.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    generateImages();
                }
            });
        }

        function loadSavedData() {
            // Load saved API key
            const savedKey = localStorage.getItem('visionforge_deepseek_key');
            if (savedKey) {
                elements.apiKey.value = savedKey;
                deepSeekApiKey = savedKey;
            }
            
            // Load saved prompt
            const savedPrompt = localStorage.getItem('visionforge_prompt');
            if (savedPrompt) {
                elements.prompt.value = savedPrompt;
            }
            
            // Load saved style
            const savedStyle = localStorage.getItem('visionforge_style');
            if (savedStyle && STYLES.some(s => s.id === savedStyle)) {
                currentStyle = savedStyle;
                document.querySelector(`[data-style="${savedStyle}"]`)?.classList.add('active');
                document.querySelectorAll('.style-option').forEach(opt => {
                    if (opt.dataset.style !== savedStyle) opt.classList.remove('active');
                });
            }
            
            // Load generated images
            const savedImages = localStorage.getItem('visionforge_images');
            if (savedImages) {
                try {
                    generatedImages = JSON.parse(savedImages);
                    updateGallery();
                } catch (e) {
                    console.error('Error loading saved images:', e);
                }
            }
        }

        async function generateImages() {
            const prompt = elements.prompt.value.trim();
            
            if (!prompt) {
                showStatus('Please describe the image you want to create', 'error');
                return;
            }
            
            // Show loading
            elements.loading.style.display = 'block';
            elements.generateBtn.disabled = true;
            
            // Get parameters
            const width = parseInt(elements.width.value);
            const height = parseInt(elements.height.value);
            const numVariations = elements.multipleVariations.checked ? 4 : 1;
            const shouldEnhance = elements.enhancePrompt.checked;
            
            // Step 1: Enhance prompt with DeepSeek AI (if API key provided and enabled)
            let finalPrompt = prompt;
            if (shouldEnhance) {
                try {
                    elements.loadingDetails.textContent = 'Enhancing prompt with DeepSeek AI...';
                    
                    if (deepSeekApiKey) {
                        // Use DeepSeek API for enhancement
                        finalPrompt = await enhancePromptWithDeepSeek(prompt, currentStyle);
                    } else {
                        // Use local enhancement
                        finalPrompt = enhancePromptLocally(prompt, currentStyle);
                    }
                    
                    // Show enhanced prompt
                    elements.enhancedText.textContent = finalPrompt;
                    elements.enhancedPromptDisplay.style.display = 'block';
                    
                } catch (error) {
                    console.warn('Prompt enhancement failed, using original:', error);
                    finalPrompt = prompt;
                }
            }
            
            // Step 2: Generate images using free APIs
            try {
                elements.loadingDetails.textContent = 'Generating images with AI...';
                
                const images = await generateImagesWithFreeAPI(finalPrompt, width, height, numVariations);
                
                // Add to gallery
                images.forEach((img, index) => {
                    const imageData = {
                        id: Date.now() + index,
                        url: img.url,
                        prompt: finalPrompt,
                        style: currentStyle,
                        width: width,
                        height: height,
                        timestamp: new Date().toISOString(),
                        source: img.source
                    };
                    
                    generatedImages.push(imageData);
                });
                
                // Auto-enhance if enabled
                if (elements.autoEnhance.checked && deepSeekApiKey) {
                    elements.loadingDetails.textContent = 'Enhancing image quality with AI...';
                    await enhanceGeneratedImages();
                }
                
                // Save to localStorage
                localStorage.setItem('visionforge_images', JSON.stringify(generatedImages));
                
                // Update UI
                updateGallery();
                showStatus(`Successfully generated ${images.length} image(s)`, 'success');
                
            } catch (error) {
                console.error('Image generation error:', error);
                showStatus(`Error: ${error.message}`, 'error');
            } finally {
                elements.loading.style.display = 'none';
                elements.generateBtn.disabled = false;
            }
        }

        async function enhancePromptWithDeepSeek(prompt, style) {
            const styleObj = STYLES.find(s => s.id === style);
            const styleKeywords = styleObj ? styleObj.keywords : '';
            
            const enhancementPrompt = `Enhance this image description for AI image generation. Add relevant details for ${style} style. Be specific about lighting, composition, and details. Original: "${prompt}"`;
            
            try {
                const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${deepSeekApiKey}`
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are an expert AI image prompt engineer. Enhance user prompts for better image generation results.'
                            },
                            {
                                role: 'user',
                                content: enhancementPrompt
                            }
                        ],
                        max_tokens: 200,
                        temperature: 0.7
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }
                
                const data = await response.json();
                return data.choices[0]?.message?.content || prompt;
                
            } catch (error) {
                console.warn('DeepSeek API error, using local enhancement:', error);
                return enhancePromptLocally(prompt, style);
            }
        }

        function enhancePromptLocally(prompt, style) {
            const styleObj = STYLES.find(s => s.id === style);
            const styleKeywords = styleObj ? styleObj.keywords : '';
            
            const enhancements = [
                'masterpiece, best quality, ultra detailed, sharp focus',
                '8k resolution, professional photography',
                'intricate details, realistic textures',
                'perfect composition, balanced lighting',
                'cinematic atmosphere, dramatic mood'
            ];
            
            const randomEnhancement = enhancements[Math.floor(Math.random() * enhancements.length)];
            
            return `${prompt}, ${styleKeywords}, ${randomEnhancement}`.replace(/\s+/g, ' ').trim();
        }

        async function generateImagesWithFreeAPI(prompt, width, height, numVariations) {
            const images = [];
            const baseSeed = Date.now();
            
            // Rotate between different free APIs
            currentApiIndex = (currentApiIndex + 1) % IMAGE_APIS.length;
            const currentApi = IMAGE_APIS[currentApiIndex];
            
            for (let i = 0; i < numVariations; i++) {
                const seed = baseSeed + i;
                
                try {
                    // For demo purposes, we'll use a placeholder service
                    // In a real implementation, you would call actual free image generation APIs
                    
                    // Simulate API call delay
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Generate a placeholder image based on the prompt
                    const keyword = prompt.split(' ').slice(0, 3).join('-').toLowerCase();
                    const placeholderUrl = `https://picsum.photos/seed/${seed}/${width}/${height}`;
                    
                    images.push({
                        url: placeholderUrl,
                        source: currentApi.name
                    });
                    
                } catch (error) {
                    console.warn(`API ${currentApi.name} failed, trying next...`);
                    // Fallback to next API
                }
            }
            
            // If no images were generated, use fallback
            if (images.length === 0) {
                for (let i = 0; i < numVariations; i++) {
                    const seed = baseSeed + i;
                    const fallbackUrl = `https://picsum.photos/seed/visionforge-${seed}/${width}/${height}`;
                    
                    images.push({
                        url: fallbackUrl,
                        source: 'Fallback'
                    });
                }
            }
            
            return images;
        }

        async function enhanceGeneratedImages() {
            // This is where you would implement AI-based image enhancement
            // For now, we'll just simulate it
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            showStatus('AI enhancement completed', 'success');
        }

        function updateGallery() {
            const imageGrid = elements.imageGrid;
            
            if (generatedImages.length === 0) {
                imageGrid.innerHTML = `
                    <div class="empty-gallery">
                        <div class="empty-icon">üé®</div>
                        <div class="empty-title">Your gallery is empty</div>
                        <p>Describe an image above and click "Generate" to create your first masterpiece!</p>
                    </div>
                `;
            } else {
                // Clear and rebuild gallery
                imageGrid.innerHTML = '';
                
                // Show newest first
                [...generatedImages].reverse().forEach(image => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'image-card';
                    imageCard.innerHTML = `
                        <div class="image-container">
                            <img src="${image.url}" 
                                 class="generated-image" 
                                 alt="${image.prompt.substring(0, 100)}..."
                                 onload="this.style.display='block'; this.previousElementSibling.style.display='none';"
                                 onerror="this.style.display='none'; this.previousElementSibling.style.display='flex';">
                            <div class="image-placeholder">
                                Loading image...
                            </div>
                        </div>
                        <div class="image-info">
                            <div class="image-meta">
                                <span>${image.style} ‚Ä¢ ${image.width}√ó${image.height}</span>
                                <span>${new Date(image.timestamp).toLocaleDateString()}</span>
                            </div>
                            <div class="image-prompt" title="${image.prompt}">
                                ${image.prompt.substring(0, 100)}${image.prompt.length > 100 ? '...' : ''}
                            </div>
                            <div class="image-actions">
                                <button class="action-btn download-btn" onclick="downloadImage('${image.id}')">
                                    <i class="fas fa-download"></i> Download
                                </button>
                                <button class="action-btn regenerate-btn" onclick="regenerateImage('${image.id}')">
                                    <i class="fas fa-redo"></i> Regenerate
                                </button>
                            </div>
                        </div>
                    `;
                    
                    imageGrid.appendChild(imageCard);
                });
            }
            
            updateGalleryStats();
        }

        function updateGalleryStats() {
            elements.totalImages.innerHTML = `<i class="fas fa-images"></i><span>${generatedImages.length} images</span>`;
            
            // Calculate approximate storage used (rough estimate)
            const avgImageSize = 500; // KB per image
            const totalSizeKB = generatedImages.length * avgImageSize;
            const totalSizeMB = (totalSizeKB / 1024).toFixed(1);
            
            elements.storageUsed.innerHTML = `<i class="fas fa-database"></i><span>${totalSizeMB} MB</span>`;
        }

        function downloadImage(imageId) {
            const image = generatedImages.find(img => img.id.toString() === imageId.toString());
            if (!image) return;
            
            // Create a temporary link element
            const link = document.createElement('a');
            link.href = image.url;
            link.download = `visionforge-${image.style}-${Date.now()}.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showStatus('Download started', 'success');
        }

        function regenerateImage(imageId) {
            const image = generatedImages.find(img => img.id.toString() === imageId.toString());
            if (!image) return;
            
            // Use the original prompt
            elements.prompt.value = image.prompt;
            
            // Set the style
            currentStyle = image.style;
            document.querySelectorAll('.style-option').forEach(opt => {
                opt.classList.toggle('active', opt.dataset.style === image.style);
            });
            
            // Set the size
            elements.width.value = image.width;
            elements.height.value = image.height;
            
            // Generate
            generateImages();
        }

        function clearAllImages() {
            if (generatedImages.length === 0) return;
            
            if (confirm('Clear all generated images? This cannot be undone.')) {
                generatedImages = [];
                localStorage.removeItem('visionforge_images');
                updateGallery();
                showStatus('All images cleared', 'success');
            }
        }

        async function enhanceWithAI() {
            const prompt = elements.prompt.value.trim();
            
            if (!prompt) {
                showStatus('Please enter a prompt to enhance', 'warning');
                return;
            }
            
            if (!deepSeekApiKey) {
                showStatus('Enter DeepSeek API key for advanced enhancement', 'warning');
                // Use local enhancement
                elements.prompt.value = enhancePromptLocally(prompt, currentStyle);
                showStatus('Prompt enhanced with basic rules', 'success');
                return;
            }
            
            try {
                showStatus('Enhancing prompt with DeepSeek AI...', 'info');
                
                const enhanced = await enhancePromptWithDeepSeek(prompt, currentStyle);
                elements.prompt.value = enhanced;
                
                showStatus('Prompt enhanced with AI!', 'success');
                
            } catch (error) {
                showStatus('Enhancement failed, using basic enhancement', 'error');
                elements.prompt.value = enhancePromptLocally(prompt, currentStyle);
            }
        }

        function clearPrompt() {
            elements.prompt.value = '';
            elements.enhancedPromptDisplay.style.display = 'none';
        }

        function exportGallery() {
            if (generatedImages.length === 0) {
                showStatus('No images to export', 'warning');
                return;
            }
            
            // Create a ZIP file of all images (simplified version)
            const exportData = {
                metadata: {
                    app: 'VisionForge AI',
                    version: '1.0',
                    exportDate: new Date().toISOString(),
                    totalImages: generatedImages.length
                },
                images: generatedImages.map(img => ({
                    id: img.id,
                    prompt: img.prompt,
                    style: img.style,
                    dimensions: `${img.width}x${img.height}`,
                    timestamp: img.timestamp,
                    url: img.url
                }))
            };
            
            // Create downloadable JSON
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `visionforge-gallery-${Date.now()}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showStatus(`Gallery exported (${generatedImages.length} images)`, 'success');
        }

        function showStatus(message, type = 'info') {
            const statusBar = elements.statusBar;
            statusBar.textContent = message;
            statusBar.className = 'status-bar';
            statusBar.classList.add(type);
            statusBar.style.display = 'block';
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                statusBar.style.display = 'none';
            }, 5000);
        }

        function showInstructions() {
            alert(`üìö VisionForge AI Instructions:

1. Enter your DeepSeek API key (optional but recommended)
2. Describe the image you want to create
3. Select an art style
4. Choose image size or use custom dimensions
5. Toggle options as needed
6. Click "Generate" or press Ctrl+Enter

üí° Tips:
- Use detailed descriptions for better results
- Enable "AI Enhancement" for improved prompts
- With API key: Get AI-powered prompt engineering
- Without API key: Still works with free generation
- Images are saved locally in your browser

üé® Styles Available: ${STYLES.map(s => s.name).join(', ')}`);
        }

        function showApiInfo() {
            alert(`üîß API Information:

DeepSeek API:
- Get free API key from: https://platform.deepseek.com
- Used for: Prompt enhancement, style optimization
- Optional: App works without it

Image Generation:
- Uses free image generation services
- No API key required
- Limited to basic image generation

üíé For Production Use:
Consider integrating with:
- OpenAI DALL-E 3
- Stable Diffusion API
- Midjourney API
- Or other paid services for better quality`);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Make functions available globally
        window.downloadImage = downloadImage;
        window.regenerateImage = regenerateImage;
        window.enhanceWithAI = enhanceWithAI;
        window.clearPrompt = clearPrompt;
        window.exportGallery = exportGallery;
        window.showInstructions = showInstructions;
        window.showApiInfo = showApiInfo;
    </script>
</body>
</html>